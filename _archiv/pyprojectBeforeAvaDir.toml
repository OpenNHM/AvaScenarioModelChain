[project]
name = "cairos"
description = "The CAIROS workflow"
requires-python = ">=3.9,<3.11"

dependencies = [
    "numpy",         
    "matplotlib",
    "shapely",
    "ConfigUpdater",
    "geopandas",
    "numba",            
    "whitebox",
]


[tool.pixi.tasks]
# Run CAIROS workflow (main driver)
cairos = { cmd = "python runCairos.py", cwd = "cairosModelChain" }

[tool.pixi.workspace]
channels = ["conda-forge"]
platforms = ["linux-64"]

[tool.pixi.environments]
dev = { features = ["dev"] }

[tool.pixi.activation.env]
NUMBA_CAPTURED_ERRORS = "new_style"
CPL_LOG = "/dev/null"
GDAL_PAM_ENABLED = "NO"
GDAL_DISABLE_READDIR_ON_OPEN = "EMPTY_DIR"

[tool.pixi.dependencies]
gdal = "3.9.*"
proj = "9.4.*"
rasterio = "1.3.*"

# ── Dev env uses your local AvaFrame (editable only, no PyPI fallback)
[tool.pixi.feature.dev.pypi-dependencies]
avaframe = { path = "../AvaFrame", editable = true }
